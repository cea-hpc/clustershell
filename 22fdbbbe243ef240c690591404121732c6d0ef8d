{
  "comments": [
    {
      "key": {
        "uuid": "5a72e520_7a5d5de9",
        "filename": "lib/ClusterShell/Worker/Worker.py",
        "patchSetId": 3
      },
      "lineNbr": 665,
      "author": {
        "id": 1003524
      },
      "writtenOn": "2016-02-23T18:56:18Z",
      "side": 1,
      "message": "Ahh, I see now! Worker and StreamWorker are setting current_node to self.key, but not WorkerSimple. And that is used to check if that\u0027s a local/distant worker. That\u0027s not a very good solution... but I understand the patch.\n\nDid you think of calling Worker._on_start(self, None) in that case, as a workaround.\n\nWe would have to discuss of a better solution I guess...",
      "revId": "22fdbbbe243ef240c690591404121732c6d0ef8d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a72e520_9ad059f9",
        "filename": "lib/ClusterShell/Worker/Worker.py",
        "patchSetId": 3
      },
      "lineNbr": 665,
      "author": {
        "id": 1003524
      },
      "writtenOn": "2016-02-23T20:39:51Z",
      "side": 1,
      "message": "I mean, a better solution for the long-term, not for this patch (that I will probably accept :). I will have a closer look tonight.",
      "parentUuid": "5a72e520_7a5d5de9",
      "revId": "22fdbbbe243ef240c690591404121732c6d0ef8d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a72e520_9ada19e8",
        "filename": "lib/ClusterShell/Worker/Worker.py",
        "patchSetId": 3
      },
      "lineNbr": 665,
      "author": {
        "id": 1004434
      },
      "writtenOn": "2016-02-23T22:01:42Z",
      "side": 1,
      "message": "Maybe the good fix is to unify the API between workers. I\u0027m advocating in this direction for a while. Things are better in 1.7, thanks to StreamWorker, but this is not enough.",
      "parentUuid": "5a72e520_9ad059f9",
      "revId": "22fdbbbe243ef240c690591404121732c6d0ef8d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a72e520_fa4a2dab",
        "filename": "lib/ClusterShell/Worker/Worker.py",
        "patchSetId": 3
      },
      "lineNbr": 665,
      "author": {
        "id": 1004434
      },
      "writtenOn": "2016-02-23T22:01:42Z",
      "side": 1,
      "message": "MilkCheck and others use this trick for a while, but there is no \"good\" way to make this difference nicely in the API, even if things could be really close :\n\nHave a look :\nhttps://github.com/cea-hpc/milkcheck/blob/master/lib/MilkCheck/UI/Cli.py#L305",
      "parentUuid": "5a72e520_7a5d5de9",
      "revId": "22fdbbbe243ef240c690591404121732c6d0ef8d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a72e520_ae6cf637",
        "filename": "lib/ClusterShell/Worker/Worker.py",
        "patchSetId": 3
      },
      "lineNbr": 665,
      "author": {
        "id": 1003524
      },
      "writtenOn": "2016-02-24T06:37:07Z",
      "side": 1,
      "message": "I guess as a workaround for 1.7.1, I would prefer calls to each super method with key\u003dNone, to avoid duplicating most of the code and thus it will be clear that key is None in that case. Let me know if you agree or if I missed anythine. eg.\n\nStreamWorker._on_start(self, None)",
      "parentUuid": "5a72e520_fa4a2dab",
      "revId": "22fdbbbe243ef240c690591404121732c6d0ef8d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a72e520_ce693227",
        "filename": "lib/ClusterShell/Worker/Worker.py",
        "patchSetId": 3
      },
      "lineNbr": 680,
      "author": {
        "id": 1003524
      },
      "writtenOn": "2016-02-24T06:37:07Z",
      "side": 1,
      "message": "StreamWorker._on_rc(self, None, rc)",
      "range": {
        "startLine": 675,
        "startChar": 8,
        "endLine": 680,
        "endChar": 32
      },
      "revId": "22fdbbbe243ef240c690591404121732c6d0ef8d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a72e520_ee76ee05",
        "filename": "lib/ClusterShell/Worker/Worker.py",
        "patchSetId": 3
      },
      "lineNbr": 690,
      "author": {
        "id": 1003524
      },
      "writtenOn": "2016-02-24T06:37:07Z",
      "side": 1,
      "message": "StreamWorker._on_written(self, None, bytes_count, sname)",
      "range": {
        "startLine": 684,
        "startChar": 8,
        "endLine": 690,
        "endChar": 61
      },
      "revId": "22fdbbbe243ef240c690591404121732c6d0ef8d",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735",
      "unresolved": false
    }
  ]
}