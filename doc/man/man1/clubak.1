.\" Man page generated from reStructuredText.
.
.TH CLUBAK 1 "2021-11-03" "1.8.4" "ClusterShell User Manual"
.SH NAME
clubak \- format output from clush/pdsh-like output and more
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
\fBclubak\fP [ OPTIONS ]
.SH DESCRIPTION
.sp
\fBclubak\fP formats text from standard input containing lines of the form
"\fInode:output\fP".  It is fully backward compatible with \fBdshbak\fP(1) but
provides additional features. For instance, \fBclubak\fP always displays
its results sorted by node/nodeset.
.sp
You do not need to use \fBclubak\fP when using \fBclush\fP(1) as all output
formatting features are already included in. It is provided for other usages,
like post\-processing results of the form "\fInode:output\fP".
.sp
Like \fBclush\fP(1), \fBclubak\fP uses the \fIClusterShell.MsgTree\fP module of the
ClusterShell library (see \fBpydoc ClusterShell.MsgTree\fP).
.SH INVOCATION
.sp
\fBclubak\fP should be started with connected standard input.
.SH OPTIONS
.INDENT 0.0
.TP
.B \-\-version
show \fBclubak\fP version number and exit
.TP
.B \-b\fP,\fB  \-c
gather nodes with same output (\-c is provided for \fBdshbak\fP(1)
compatibility)
.TP
.B \-d\fP,\fB  \-\-debug
output more messages for debugging purpose
.TP
.B \-L
disable header block and order output by nodes
.TP
.B \-r\fP,\fB  \-\-regroup
fold nodeset using node groups
.TP
.BI \-s \ GROUPSOURCE\fP,\fB \ \-\-groupsource\fB= GROUPSOURCE
optional \fBgroups.conf\fP(5) group source to use
.TP
.BI \-\-groupsconf\fB= FILE
use alternate config file for groups.conf(5)
.TP
.B \-G\fP,\fB  \-\-groupbase
do not display group source prefix (always \fI@groupname\fP)
.TP
.BI \-S \ SEPARATOR\fP,\fB \ \-\-separator\fB= SEPARATOR
node / line content separator string (default: \fI:\fP)
.TP
.B \-F\fP,\fB  \-\-fast
faster but memory hungry mode (preload all messages per node)
.TP
.B \-T\fP,\fB  \-\-tree
message tree trace mode; switch to enable \fBClusterShell.MsgTree\fP trace mode, all keys/nodes being kept for each message element of the tree, thus allowing special output gathering
.TP
.BI \-\-color\fB= WHENCOLOR
\fBclush\fP can use NO_COLOR, CLICOLOR and CLICOLOR_FORCE environment variables. \fB\-\-color\fP command line option always takes precedence over environment variables. NO_COLOR takes precedence over CLICOLOR_FORCE which takes precedence over CLICOLOR. \fB\-\-color\fP tells whether to use ANSI colors to surround node or nodeset prefix/header with escape sequences to display them in color on the terminal. \fIWHENCOLOR\fP is \fBnever\fP, \fBalways\fP or \fBauto\fP (which use color if standard output refers to a terminal). Color is set to [34m (blue foreground text) and cannot be modified.
.TP
.B \-\-diff
show diff between gathered outputs
.UNINDENT
.SH EXIT STATUS
.sp
An exit status of zero indicates success of the \fBclubak\fP command.
.SH EXAMPLES
.INDENT 0.0
.IP 1. 3
\fBclubak\fP can be used to gather some recorded \fBclush\fP(1) results:
.UNINDENT
.INDENT 0.0
.TP
.B Record \fBclush\fP(1) results in a file:
.nf
# clush \-w node[1\-7] uname \-r >/tmp/clush_output
# clush \-w node[32\-159] uname \-r >>/tmp/clush_output
.fi
.sp
.TP
.B Display file gathered results (in line\-mode):
.nf
# clubak \-bL </tmp/clush_output
.fi
.sp
.UNINDENT
.INDENT 0.0
.IP 2. 3
Another example, iterate over \fInode*\fP text files in current directory and gather characters count for all of them:
.INDENT 3.0
.INDENT 3.5
.nf
# find \-name "node*" \-exec wc \-c {} ; | awk \(aq{ gsub("./","",$2); print $2": "$1 }\(aq | clubak \-bL
node[1,3]: 7
node2: 9
.fi
.sp
.UNINDENT
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fBcluset\fP(1), \fBclush\fP(1), \fBnodeset\fP(1), \fBgroups.conf\fP(5).
.sp
\fI\%http://clustershell.readthedocs.org/\fP
.SH BUG REPORTS
.INDENT 0.0
.TP
.B Use the following URL to submit a bug report or feedback:
\fI\%https://github.com/cea\-hpc/clustershell/issues\fP
.UNINDENT
.SH AUTHOR
Stephane Thiell <sthiell@stanford.edu>
.SH COPYRIGHT
GNU Lesser General Public License version 2.1 or later (LGPLv2.1+)
.\" Generated by docutils manpage writer.
.
